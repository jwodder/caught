PRAGMA foreign_keys = ON;
PRAGMA encoding = "UTF-8";

CREATE TABLE pokemon (dexno INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
		      name  TEXT    NOT NULL UNIQUE);

CREATE TABLE pokemon_names (dexno INTEGER NOT NULL REFERENCES pokemon(dexno),
			    name  TEXT    NOT NULL UNIQUE,
			    CHECK (name = lower(name)));

CREATE TABLE games (gameID      INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
		    version     TEXT    NOT NULL,
		    player_name TEXT    NOT NULL,
		    dexsize     INTEGER NOT NULL);

CREATE TABLE game_names (gameID INTEGER NOT NULL REFERENCES games(gameID),
			 name   TEXT    NOT NULL UNIQUE,
			 CHECK (name = lower(name)));

CREATE TABLE caught (gameID INTEGER NOT NULL REFERENCES games(gameID),
		     dexno  INTEGER NOT NULL REFERENCES pokemon(dexno),
		     status INTEGER NOT NULL,
		     PRIMARY KEY (gameID, dexno));
